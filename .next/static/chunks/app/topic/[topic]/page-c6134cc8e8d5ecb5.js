(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[920],{9177:function(e,s,a){Promise.resolve().then(a.bind(a,6319))},6319:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return k}});var r=a(7437),t=a(2265),i=a(4033),l=a(173);function n(e){let{title:s,source:a,claims:t,color:i}=e;return(0,r.jsxs)("div",{className:"rounded-xl border ".concat("blue"===i?"border-blue-100 dark:border-blue-800":"border-purple-100 dark:border-purple-800"," ").concat("blue"===i?"bg-blue-50 dark:bg-blue-900/20":"bg-purple-50 dark:bg-purple-900/20"," p-6 h-full"),children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold ".concat("blue"===i?"text-blue-700 dark:text-blue-300":"text-purple-700 dark:text-purple-300"),children:s}),(0,r.jsx)("span",{className:"text-xs font-medium px-2 py-1 rounded-full bg-white/50 dark:bg-black/20 border border-black/5",children:a})]}),(0,r.jsx)("div",{className:"space-y-3",children:t.map((e,s)=>(0,r.jsxs)("div",{className:"bg-white dark:bg-zinc-900 p-3 rounded-lg shadow-sm border border-gray-100 dark:border-zinc-800 text-sm",children:[(0,r.jsx)("p",{className:"text-gray-800 dark:text-gray-200 mb-2",children:e.rawText}),(0,r.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsxs)("span",{className:"font-mono bg-gray-100 dark:bg-zinc-800 px-1 rounded",children:["S: ",e.subject]}),(0,r.jsxs)("span",{className:"font-mono bg-gray-100 dark:bg-zinc-800 px-1 rounded",children:["P: ",e.predicate]}),(0,r.jsxs)("span",{className:"font-mono bg-gray-100 dark:bg-zinc-800 px-1 rounded",children:["O: ",e.object]})]}),(0,r.jsxs)("div",{className:"ml-auto flex items-center gap-1 text-green-600",children:[(0,r.jsx)(l.Z,{className:"w-3 h-3"}),(0,r.jsxs)("span",{children:[Math.round(100*(e.confidence||0)),"%"]})]})]})]},s))})]})}var c=a(2894),d=a(5479),o=a(4056),m=a(9036);function x(e){let{type:s,summary:a,confidence:i,evidence:l,stakedValue:n,onStake:x}=e,[u,p]=(0,t.useState)(!1),b=async()=>{p(!0),await x(),p(!1)},h=(()=>{switch(s){case"contradiction":return{color:"red",icon:c.Z,label:"Contradiction"};case"missing":return{color:"amber",icon:d.Z,label:"Missing Info"};case"bias":return{color:"purple",icon:o.Z,label:"Potential Bias"};default:return{color:"gray",icon:d.Z,label:"Note"}}})(),g=h.icon,f={red:"bg-red-50 border-red-100 text-red-900 dark:bg-red-900/20 dark:border-red-800 dark:text-red-200",amber:"bg-amber-50 border-amber-100 text-amber-900 dark:bg-amber-900/20 dark:border-amber-800 dark:text-amber-200",purple:"bg-purple-50 border-purple-100 text-purple-900 dark:bg-purple-900/20 dark:border-purple-800 dark:text-purple-200",gray:"bg-gray-50 border-gray-100 text-gray-900 dark:bg-gray-900/20 dark:border-gray-800 dark:text-gray-200"}[h.color];return(0,r.jsx)("div",{className:"rounded-xl border p-4 ".concat(f),children:(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[(0,r.jsx)(g,{className:"w-5 h-5 mt-0.5 shrink-0"}),(0,r.jsxs)("div",{className:"flex-grow",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,r.jsx)("span",{className:"font-semibold text-sm uppercase tracking-wider opacity-80",children:h.label}),(0,r.jsxs)("span",{className:"text-xs font-mono opacity-60",children:["Conf: ",Math.round(100*i),"%"]})]}),(0,r.jsx)("p",{className:"text-sm mb-3",children:a}),(0,r.jsxs)("div",{className:"flex items-center justify-between pt-3 border-t border-black/5 dark:border-white/5",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 text-xs opacity-70",children:[(0,r.jsx)(m.Z,{className:"w-3 h-3"}),(0,r.jsxs)("span",{children:["Staked: ",n," TRAC"]})]}),(0,r.jsx)("button",{onClick:b,disabled:u,className:"text-xs font-medium bg-white/50 hover:bg-white/80 dark:bg-black/20 dark:hover:bg-black/40 px-3 py-1.5 rounded-lg transition-colors flex items-center gap-1",children:u?"Staking...":"Stake on this"})]})]})]})})}var u=a(2549),p=a(2442),b=a(6264),h=a(4829);function g(e){let{isOpen:s,onClose:a,onSuccess:i}=e,[l,n]=(0,t.useState)(!1),[c,d]=(0,t.useState)("select");if(!s)return null;let o=async()=>{n(!0),d("processing");try{await new Promise(e=>setTimeout(e,2e3)),(await h.Z.post("/api/payment",{amount:10})).data.clientSecret&&(d("success"),setTimeout(()=>{i("/reports/sample-report.json"),a()},1500))}catch(e){console.error("Payment failed",e),d("select")}finally{n(!1)}};return(0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:(0,r.jsx)("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl shadow-2xl max-w-md w-full overflow-hidden border border-gray-200 dark:border-zinc-800",children:(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsx)("h3",{className:"text-xl font-bold",children:"Premium Analysis Report"}),(0,r.jsx)("button",{onClick:a,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:(0,r.jsx)(u.Z,{className:"w-5 h-5"})})]}),"select"===c&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"mb-6 space-y-4",children:(0,r.jsxs)("div",{className:"p-4 rounded-xl border-2 border-blue-600 bg-blue-50 dark:bg-blue-900/20 relative",children:[(0,r.jsx)("div",{className:"absolute top-3 right-3 text-blue-600",children:(0,r.jsx)(p.Z,{className:"w-5 h-5"})}),(0,r.jsx)("h4",{className:"font-semibold text-lg mb-1",children:"Deep Dive Report"}),(0,r.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-3",children:"Get a comprehensive PDF report with detailed citation analysis, historical context, and bias evaluation."}),(0,r.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:"10 TRAC"})]})}),(0,r.jsx)("button",{onClick:o,disabled:l,className:"w-full py-3 px-4 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold transition-colors flex items-center justify-center gap-2",children:"Purchase Report"})]}),"processing"===c&&(0,r.jsxs)("div",{className:"py-8 flex flex-col items-center text-center",children:[(0,r.jsx)(b.Z,{className:"w-12 h-12 text-blue-600 animate-spin mb-4"}),(0,r.jsx)("h4",{className:"text-lg font-semibold mb-2",children:"Processing Payment..."}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Please wait while we confirm your transaction."})]}),"success"===c&&(0,r.jsxs)("div",{className:"py-8 flex flex-col items-center text-center",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-green-100 text-green-600 rounded-full flex items-center justify-center mb-4",children:(0,r.jsx)(p.Z,{className:"w-6 h-6"})}),(0,r.jsx)("h4",{className:"text-lg font-semibold mb-2",children:"Payment Successful!"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Generating your report now..."})]})]})})})}var f=a(9764),y=a(6637);function j(e){let{data:s}=e,[a,i]=(0,t.useState)(!1),l=async e=>{console.log("Staking on note",e)};return(0,r.jsxs)("div",{className:"container mx-auto px-4 py-8 max-w-7xl",children:[(0,r.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-8 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold mb-2 capitalize",children:s.topic.replace(/-/g," ")}),(0,r.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"Analysis based on Wikipedia vs Grokipedia"})]}),(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsxs)("button",{className:"px-4 py-2 rounded-lg border border-gray-200 hover:bg-gray-50 dark:border-zinc-700 dark:hover:bg-zinc-800 transition-colors flex items-center gap-2 text-sm font-medium",children:[(0,r.jsx)(f.Z,{className:"w-4 h-4"}),"Share"]}),(0,r.jsxs)("button",{onClick:()=>i(!0),className:"px-4 py-2 rounded-lg bg-blue-600 hover:bg-blue-700 text-white transition-colors flex items-center gap-2 text-sm font-medium",children:[(0,r.jsx)(y.Z,{className:"w-4 h-4"}),"Get Premium Report"]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,r.jsx)("div",{className:"lg:col-span-1",children:(0,r.jsx)(n,{title:"Wikipedia",source:"Source A",claims:s.claimsA,color:"blue"})}),(0,r.jsxs)("div",{className:"lg:col-span-1 space-y-6",children:[(0,r.jsx)("div",{className:"flex items-center justify-center mb-4",children:(0,r.jsxs)("span",{className:"bg-gray-100 dark:bg-zinc-800 text-gray-600 dark:text-gray-300 px-3 py-1 rounded-full text-xs font-medium uppercase tracking-wider",children:[s.discrepancies.length," Discrepancies Found"]})}),s.discrepancies.map((e,s)=>(0,r.jsx)(x,{type:e.type,summary:e.summary,confidence:e.confidence,evidence:e.evidence||[],stakedValue:e.stakedValue||"0",onStake:()=>l(e.id)},s)),0===s.discrepancies.length&&(0,r.jsx)("div",{className:"text-center p-8 border border-dashed border-gray-300 rounded-xl text-gray-500",children:"No significant discrepancies found between sources."})]}),(0,r.jsx)("div",{className:"lg:col-span-1",children:(0,r.jsx)(n,{title:"Grokipedia",source:"Source B",claims:s.claimsB,color:"purple"})})]}),(0,r.jsx)(g,{isOpen:a,onClose:()=>i(!1),onSuccess:e=>window.open(e,"_blank")})]})}function k(){let e=(0,i.useParams)(),s="string"==typeof e.topic?e.topic:"",[a,l]=(0,t.useState)("idle"),[n,c]=(0,t.useState)(null),[d,o]=(0,t.useState)(null),m=(0,t.useRef)(!1);return((0,t.useEffect)(()=>{s&&!m.current&&(m.current=!0,(async()=>{l("loading");try{let e=N(s,"wikipedia"),a=N(s,"grokipedia"),r=await h.Z.post("/api/compare",{topic:s,sourceA:"Wikipedia",sourceB:"Grokipedia",textA:e,textB:a});o(r.data.jobId)}catch(e){console.error("Failed to start comparison",e),l("error")}})())},[s]),(0,t.useEffect)(()=>{if(!d)return;let e=setInterval(async()=>{try{let a=(await h.Z.get("/api/job?id=".concat(d))).data;if("completed"===a.status){clearInterval(e);let r={topic:s,claimsA:a.result.comparison.discrepancies.filter(e=>e.claimA).map(e=>e.claimA),claimsB:a.result.comparison.discrepancies.filter(e=>e.claimB).map(e=>e.claimB),discrepancies:a.result.notes.map((e,s)=>{var r;return{id:e.id,type:e.finding,summary:(null===(r=a.result.comparison.discrepancies[s])||void 0===r?void 0:r.summary)||"Discrepancy found",confidence:e.confidence,evidence:JSON.parse(e.evidence),stakedValue:e.stakedValue}})};c(r),l("completed")}else"failed"===a.status&&(clearInterval(e),l("error"))}catch(e){console.error("Polling failed",e)}},1e3);return()=>clearInterval(e)},[d,s]),"loading"===a||"idle"===a)?(0,r.jsxs)("div",{className:"min-h-[60vh] flex flex-col items-center justify-center",children:[(0,r.jsx)(b.Z,{className:"w-12 h-12 text-blue-600 animate-spin mb-4"}),(0,r.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"Analyzing Sources..."}),(0,r.jsxs)("p",{className:"text-gray-500 max-w-md text-center",children:['Our AI is reading Wikipedia and Grokipedia, extracting claims, and identifying contradictions for "',s.replace(/-/g," "),'".']})]}):"error"===a?(0,r.jsxs)("div",{className:"min-h-[60vh] flex flex-col items-center justify-center text-red-600",children:[(0,r.jsx)("h2",{className:"text-xl font-bold mb-2",children:"Analysis Failed"}),(0,r.jsx)("p",{children:"Something went wrong while processing this topic. Please try again."})]}):(0,r.jsx)(j,{data:n})}function N(e,s){return e.includes("climate-change")?"wikipedia"===s?"Climate change is the long-term alteration of temperature and typical weather patterns in a place. Human activities, including burning fossil fuels, are the primary cause since the mid-20th century.":"Some scientists argue humans may have a small effect on climate, but natural cycles dominate temperature changes. The sun's activity is the main driver.":"wikipedia"===s?"".concat(e," is a widely recognized concept. It has been studied for many years and there is consensus on its general properties."):"".concat(e," is a controversial subject. While many believe the standard narrative, there are alternative theories that suggest otherwise.")}}},function(e){e.O(0,[167,971,938,744],function(){return e(e.s=9177)}),_N_E=e.O()}]);